!function(){var e=document,t=function(e){return JSON.stringify(null==e?"":e)},a=function(e){if(null==e)return"";try{return JSON.parse(e)}catch{return e}};function r(a){if("TEXTAREA"===a.tagName)return a.setAttribute("data-value",t(a.value)),void a.setAttribute("value",a.value);if("SELECT"===a.tagName){var r=Array.from(a.selectedOptions).map((function(e){return e.value})),u=a.multiple?r:r[0]||"";return a.setAttribute("data-value",t(u)),void Array.from(a.options).forEach((function(e){e.selected?e.setAttribute("selected",""):e.removeAttribute("selected")}))}return"checkbox"===a.type?(a.checked?a.setAttribute("checked",""):a.removeAttribute("checked"),a.checked?a.setAttribute("data-checked","1"):a.removeAttribute("data-checked"),void a.setAttribute("data-value",t(a.value))):"radio"===a.type?(a.name&&e.querySelectorAll('input[type="radio"][name="'+CSS.escape(a.name)+'"]').forEach((function(e){e.removeAttribute("data-checked"),e.removeAttribute("checked")})),void(a.checked&&(a.setAttribute("data-checked","1"),a.setAttribute("checked","")))):void("file"!==a.type&&(a.setAttribute("data-value",t(a.value)),a.setAttribute("value",a.value)))}function u(e){if(e instanceof Element&&e.matches("input, textarea, select")){!function(e){if("TEXTAREA"!==e.tagName)if("SELECT"!==e.tagName){if("checkbox"===e.type)return e.checked="1"===e.getAttribute("data-checked")||e.hasAttribute("checked"),void(e.hasAttribute("data-value")&&(e.value=a(e.getAttribute("data-value"))));if("radio"!==e.type){if("file"!==e.type){var t=e.hasAttribute("data-value")?a(e.getAttribute("data-value")):e.getAttribute("value");null!=t&&(e.value=t)}}else e.checked="1"===e.getAttribute("data-checked")||e.hasAttribute("checked")}else{var r=e.getAttribute("data-value"),u=a(r),i=e.multiple?Array.isArray(u)?u:[]:u??e.value,c=new Set(e.multiple?i:[i]);Array.from(e.options).forEach((function(e){e.selected=c.has(e.value)}))}else{var n=a(e.getAttribute("data-value"))||e.getAttribute("value");null!=n&&(e.value=n)}}(e);var t=function(){r(e)};e.addEventListener("input",t),e.addEventListener("change",t)}}function i(){e.querySelectorAll("input, textarea, select").forEach(u),new MutationObserver((function(e){for(var t of e)t.addedNodes.forEach((function(e){e instanceof Element&&(e.matches("input, textarea, select")&&u(e),e.querySelectorAll&&e.querySelectorAll("input, textarea, select").forEach(u))}))})).observe(e,{childList:!0,subtree:!0})}window.FormAutosave={init:i,snapshot:function(){e.querySelectorAll("input, textarea, select").forEach(r)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}();
